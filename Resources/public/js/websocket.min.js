!function(e){var n=function(){"use strict";function o(e,n){if(!(e instanceof n)){throw new TypeError("Cannot call a class as a function")}}function i(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}function n(e,n,t){if(n)i(e.prototype,n);if(t)i(e,t);return e}var r=function(){function i(e,n,t){o(this,i);this._autobahn=e;this._listeners={};this._session=null;this._connect(n,t)}n(i,[{key:"off",value:function e(n,t){if(!(this._listeners[n]instanceof Array)){return}var i,o=this._listeners[n],r=o.length;for(i=0;i<r;i++){if(o[i]===t){o.splice(i,1);break}}}},{key:"on",value:function e(n,t){if(typeof this._listeners[n]==="undefined"){this._listeners[n]=[]}this._listeners[n].push(t)}},{key:"_connect",value:function e(n){var i=this;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;this._autobahn.connect(n,function(e){i._session=e;i._fire("socket/connect",e)},function(e,n,t){i._session=null;i._fire("socket/disconnect",{code:e,reason:n})},t)}},{key:"_fire",value:function e(n){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!(this._listeners[n]instanceof Array)){return}var i,o=this._listeners[n],r=o.length;for(i=0;i<r;i++){o[i].call(this,t)}}}]);return i}(),e,t=new(function(){function e(){o(this,e)}n(e,[{key:"connect",value:function e(n){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(typeof global.ab==="undefined"){throw new Error("GosSocket requires AutobahnJS to be loaded.")}return new r(global.ab,n,t)}}],[{key:"instance",get:function e(){return t}}]);return e}());return t}();"function"==typeof define&&define.amd?define([],n):"object"==typeof module&&module.exports?module.exports=n:e.WS=n}(this);